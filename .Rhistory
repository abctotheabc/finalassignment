library(tidyverse)
library(janitor)
2023_crash_data <- read_csv("https://data.cityofnewyork.us/resource/h9gi-nx95.csv?$where=contains(crash_date, '2023')")
twenty23_crash_data <- read_csv("https://data.cityofnewyork.us/resource/h9gi-nx95.csv?$where=contains(crash_date, '2023')")
twenty23_crash_data <- read_csv("https://data.cityofnewyork.us/resource/h9gi-nx95.csv?$where=contains(crash_date, '2023')")
twenty23_crash_data <- URLencode("https://data.cityofnewyork.us/resource/h9gi-nx95.csv?$where=contains(crash_date, '2023')")
twentytwentythree_crashes <- read_csv(https://data.cityofnewyork.us/resource/h9gi-nx95.csv$query=SELECT * WHERE crash_date='2023' LIMIT 100000)
twentytwentythree_crashes <- read_csv(https://data.cityofnewyork.us/resource/h9gi-nx95.csv$query=SELECT * WHERE crash_date='2023' LIMIT 100000)
api_url <- "https://data.cityofnewyork.us/resource/h9gi-nx95.csv?$where=crash_date >= '2023-01-01T00:00:00' AND crash_date < '2024-01-01T00:00:00'&$limit=100000"
library(tidyverse)
library(janitor)
api_url <- "https://data.cityofnewyork.us/resource/h9gi-nx95.csv?$where=crash_date >= '2023-01-01T00:00:00' AND crash_date < '2024-01-01T00:00:00'&$limit=100000"
twenty23crashes <- read_csv(api_url)
URLencode(api_url)
twenty23crashes <- read_csv(api_url)
library(tidyverse)
library(janitor)
api_url <- "https://data.cityofnewyork.us/resource/h9gi-nx95.csv?$where=contains(crash_date, '2023')&$limit=100000"
URLencode(api_url)
twenty23crashes <- read_csv(api_url)
URLencode(api_url)
twenty23crashes <- read_csv(api_url)
api_url <- "https://data.cityofnewyork.us/resource/h9gi-nx95.csv?$where=contains(crash_date, '2023')"
URLencode(api_url)
twenty23crashes <- read_csv(api_url)
encoded_url <- URLencode("https://data.cityofnewyork.us/resource/h9gi-nx95.csv?$where=contains(crash_date, '2023')")
twenty23crashes <- read_csv(encoded_url)
api_url <- "https://data.cityofnewyork.us/resource/h9gi-nx95.csv?$where=crash_date >= '01/01/2023' AND crash_date <= '12/31/2023'"
encoded_url <- URLencode(ap_url)
encoded_url <- URLencode(api_url)
twenty23crashes <- read_csv(encoded_url)
api_url <- "https://data.cityofnewyork.us/resource/h9gi-nx95.csv?"
querystuff <- "$where=crash_date >= '01/01/2023' AND crash_date <= '12/31/2023'"
library(tidyverse)
library(janitor)
api_url <- "https://data.cityofnewyork.us/resource/h9gi-nx95.csv?"
querystuff <- "$where=crash_date >= '01/01/2023' AND crash_date <= '12/31/2023'"
# URL encode the query parameters only
encoded_querystuff <- URLencode(querystuff, reserved = TRUE)
# Complete API URL with the encoded query parameters
full_api_url <- paste0(api_url, encoded_querystuff)
# Read the data from the API URL into a dataframe
twenty23crashes <- read_csv(full_api_url)
install.packages(httr)
api_url <- URLencode("https://data.cityofnewyork.us/resource/h9gi-nx95.csv$where=crash_date >= '01/01/2023' AND crash_date <= '12/31/2023'")
library(tidyverse)
library(janitor)
twenty23crashes <- read_csv(api_url)
twenty23crashes <- read_csv(api_url)
api_url <- URLencode("https://data.cityofnewyork.us/resource/h9gi-nx95.csv$where=crash_date >= '01/01/2023' AND crash_date <= '12/31/2023'")
twenty23crashes <- read_csv(api_url)
install.packages(httr)
api_url <- URLencode("https://data.cityofnewyork.us/resource/h9gi-nx95.csv$where=crash_date >= '01/01/2023'")
twenty23crashes <- read_csv(api_url)
library(tidyverse)
library(janitor)
twenty23crashes <- read_csv(api_url)
api_url <- URLencode("https://data.cityofnewyork.us/resource/h9gi-nx95.csv")
twenty23crashes <- read_csv(api_url)
View(twenty23crashes)
allcrashes <- read_csv(api_url)
twenty23crashes <- allcrashes$where=crash_date >= '01/01/2023' AND crash_date <= '12/31/2023'
View(twenty23crashes)
api_url <- URLencode("https://data.cityofnewyork.us/resource/h9gi-nx95.csv$where=crash_date >= '2023/01/01' AND crash_date <= '2023/12/31'")
allcrashes <- read_csv(api_url)
api_url <- URLencode("https://data.cityofnewyork.us/resource/h9gi-nx95.csv")
allcrashes <- read_csv(api_url)
View(allcrashes)
library(lubridate)
allcrashes <- read_csv(api_url) %>%
mutate(crash_date = mdy(crash_date)) %>%
filter(crash_date >= as.Date('2023-01-01') & crash_date <= as.Date('2023-12-31'))
View(allcrashes)
api_url <- URLencode("https://data.cityofnewyork.us/resource/h9gi-nx95.csv$where=crash_date >= '01/01/2023' AND crash_date <= '12/31/2023'")
allcrashes <- read_csv(api_url)
library(tidyverse)
library(janitor)
library(lubridate)
api_url <- URLencode("https://data.cityofnewyork.us/resource/h9gi-nx95.csv/$where=crash_date >= '01/01/2023' AND crash_date <= '12/31/2023'")
allcrashes <- read_csv(api_url)
library(tidyverse)
library(janitor)
library(lubridate)
api_url <- URLencode("https://data.cityofnewyork.us/resource/h9gi-nx95.csv$where=crash_date >= '01/01/2023' AND crash_date <= '12/31/2023'")
allcrashes <- read_csv(api_url)
allcrashes <- read_csv(api_url)
gc()
library(tidyverse)
library(janitor)
library(lubridate)
api_url <- URLencode("https://data.cityofnewyork.us/resource/h9gi-nx95.csv$where=crash_date >= '01/01/2023' AND crash_date <= '12/31/2023'")
twenty23crashes <- read_csv(api_url)
api_url <- URLencode("https://data.cityofnewyork.us/resource/h9gi-nx95.csv"$where=crash_date >= '01/01/2023' AND crash_date <= '12/31/2023'")
api_url <- URLencode("https://data.cityofnewyork.us/resource/h9gi-nx95.csv$where=crash_date >= '01/01/2023' AND crash_date <= '12/31/2023'")
api_url <- URLencode("https://data.cityofnewyork.us/resource/h9gi-nx95.csv?$where=crash_date >= '01/01/2023' AND crash_date <= '12/31/2023'")
twenty23crashes <- read_csv(api_url)
api_url <- URLencode("https://data.cityofnewyork.us/resource/h9gi-nx95.csv?$where=crash_date >= '2023/01/01T00:00:00.000' AND crash_date <= '2023/12/31T00:00:00.000'")
twenty23crashes <- read_csv(api_url)
twenty23crashes <- read_csv(api_url)
api_url <- URLencode("https://data.cityofnewyork.us/resource/h9gi-nx95.csv?$where=crash_date >= '2023-01-01T00:00:01.000' AND crash_date <= '2023-12-31T00:00:01.000'")
twenty23crashes <- read_csv(api_url)
api_url <- URLencode("https://data.cityofnewyork.us/resource/h9gi-nx95.csv?$where=crash_date >= '2023-01-01T00:00:01.000' AND crash_date <= '2023-12-31T00:00:01.000' LIMIT 100000")
twenty23crashes <- read_csv(api_url)
View(twenty23crashes)
write_csv(twenty23crashes)
twenty23crashes.csv <- write_csv(twenty23crashes)
write_csv(twenty23crashes, "twenty23crashes.csv")
View(twenty23crashes)
twenty23crashes_manhattan <- read_csv("twenty23crashes_manhattan.csv")
View(twenty23crashes_manhattan)
library(tidyverse)
library(janitor)
library(lubridate)
# Removing multiple columns from df
twenty23crashes_manhattan_cleaned <- twenty23crashes_manhattan %>%
select(-collision_, -vehicle_ty, -vehicle_1, -vehicle_2, -vehicle_3, -vehicle_4, -crash_time, -borough, -zip_code, -location, -on_street_, -off_street, -cross_stre)
# Removing multiple columns from df
twenty23crashes_manhattan_cleaned <- twenty23crashes_manhattan %>%
select(-collision_, -vehicle_ty, -vehicle__1, -vehicle__2, -vehicle__3, -vehicle__4, -crash_time, -borough, -zip_code, -location, -on_street_, -off_street, -cross_stre)
View(twenty23crashes_manhattan_cleaned)
twenty23crashes_manhattan_cleaned <- twenty23crashes_manhattan_cleaned %>%
rename(num_of_persons_injured = number_of_,
num_of_persons_killed = number_o_1,
num_of_ped_injured = number_o_2,
num_of_ped_killed = number_o_3,
num_of_cyclist_injured = number_o_4,
num_of_cyclist_killed = number_o_5,
num_of_motorist_injured = number_o_6,
num_of_motorist_killed = number_o_7)
twenty23crashes_manhattan_cleaned <- twenty23crashes_manhattan_cleaned %>%
rename(num_of_persons_injured = number_of_,
num_of_persons_killed = number_o_1,
num_of_ped_injured = number_o_2,
num_of_ped_killed = number_o_3,
num_of_cyclist_injured = number_o_4,
num_of_cyclist_killed = number_o_5,
num_of_motorist_injured = number_o_6,
num_of_motorist_killed = number_o_7,
contributing_factor = contributi)
twenty23crashes_manhattan_cleaned <- twenty23crashes_manhattan_cleaned %>%
rename(num_of_persons_injured = number_of_,
num_of_persons_killed = number_o_1,
num_of_ped_injured = number_o_2,
num_of_ped_killed = number_o_3,
num_of_cyclist_injured = number_o_4,
num_of_cyclist_killed = number_o_5,
num_of_motorist_injured = number_o_6,
num_of_motorist_killed = number_o_7,
contributing_factor = contributi)
twenty23crashes_manhattan_cleaned <- twenty23crashes_manhattan_cleaned %>%
rename(contributing_factor = contributi,
num_of_persons_injured = number_of_,
num_of_persons_killed = number_o_1,
num_of_ped_injured = number_o_2,
num_of_ped_killed = number_o_3,
num_of_cyclist_injured = number_o_4,
num_of_cyclist_killed = number_o_5,
num_of_motorist_injured = number_o_6,
num_of_motorist_killed = number_o_7,
contributing_factor = contributi)
twenty23crashes_manhattan_cleaned <- twenty23crashes_manhattan_cleaned %>%
rename(contributing_factor = contributi)
twenty23crashes_manhattan_cleaned <- twenty23crashes_manhattan_cleaned %>%
rename(num_of_persons_injured = number_of_,
num_of_persons_killed = number_o_1,
num_of_ped_injured = number_o_2,
num_of_ped_killed = number_o_3,
num_of_cyclist_injured = number_o_4,
num_of_cyclist_killed = number_o_5,
num_of_motorist_injured = number_o_6,
num_of_motorist_killed = number_o_7,
contributing_factor = contributi)
num_of_persons_injured <- twenty23crashes_manhattan_cleaned %>% filter(num_of_persons_injured >= 1)
View(num_of_persons_injured)
num_of_persons_injured <- twenty23crashes_manhattan_cleaned %>%
filter(num_of_persons_injured >= 1) %>%
select(crash_date, latitude, longitude, num_of_persons_injured)
num_of_persons_killed <- twenty23crashes_manhattan_cleaned %>%
filter(num_of_persons_killed >= 1) %>%
select(crash_date, latitude, longitude, num_of_persons_killed)
View(num_of_persons_killed)
View(twenty23crashes_manhattan_cleaned)
num_of_ped_injured <- twenty23crashes_manhattan_cleaned %>%
filter(num_of_ped_injured >= 1) %>%
select(crash_date, latitude, longitude, num_of_ped_injured)
num_of_ped_killed <- twenty23crashes_manhattan_cleaned %>%
filter(num_of_ped_killed >= 1) %>%
select(crash_date, latitude, longitude, num_of_ped_killed)
View(num_of_ped_injured)
View(num_of_ped_killed)
num_of_cyclist_injured <- twenty23crashes_manhattan_cleaned %>%
filter(num_of_cyclist_injured >= 1) %>%
select(crash_date, latitude, longitude, num_of_cyclist_injured)
num_of_cyclist_killed <- twenty23crashes_manhattan_cleaned %>%
filter(num_of_cyclist_killed >= 1) %>%
select(crash_date, latitude, longitude, num_of_cyclist_killed)
View(num_of_cyclist_injured)
View(num_of_cyclist_killed)
num_of_motorist_injured <- twenty23crashes_manhattan_cleaned %>%
filter(num_of_motorist_injured >= 1) %>%
select(crash_date, latitude, longitude, num_of_motorist_injured)
num_of_motorist_killed <- twenty23crashes_manhattan_cleaned %>%
filter(num_of_motorist_killed >= 1) %>%
select(crash_date, latitude, longitude, num_of_motorist_killed)
View(num_of_motorist_killed)
View(num_of_motorist_injured)
View(num_of_motorist_killed)
write_csv(num_of_cyclist_injured, "num_of_cyclist_injured.csv")
write_csv(num_of_cyclist_killed, "num_of_cyclist_killed.csv")
write_csv(num_of_motorist_injured, "num_of_motorist_injured.csv")
write_csv(num_of_motorist_killed, "num_of_motorist_killed.csv")
write_csv(num_of_ped_injured, "num_of_ped_injured.csv")
write_csv(num_of_ped_killed, "num_of_ped_killed.csv")
write_csv(num_of_persons_injured, "num_of_persons_injured.csv")
write_csv(num_of_persons_killed, "num_of_persons_killed.csv")
View(num_of_cyclist_killed)
View(num_of_cyclist_killed)
View(num_of_persons_injured)
total_num_of_persons_injured = sum(num_of_persons_injured$num_of_persons_injured)
total_num_of_persons_killed = sum(num_of_persons_killed$num_of_persons_killed)
total_persons_killed_above_60th <- read_csv("personskilledabove60th.csv")
total_persons_killed_below_60th <- read_csv("personskilledbelow60th.csv")
total_persons_injured_above_60th <- read_csv("personsinjuredabove60th.csv")
total_persons_injured_below_60th <- read_csv("personsinjuredbelow60th.csv")
View(total_persons_killed_below_60th)
View(total_persons_injured_above_60th)
total_killed_above_60th = sum(total_persons_killed_above_60th$num_of_persons_killed)
total_killed_below_60th = sum(total_persons_killed_below_60th$num_of_persons_killed)
total_injured_above_60th = sum(total_persons_injured_above_60th$num_of_persons_injured)
total_injured_below_60th = sum(total_persons_injured_below_60th$num_of_persons_injured)
total_sums <- c(total_killed_above_60th, total_killed_below_60th, total_injured_above_60th, total_injured_below_60th)
total_labels <- c("Above 60th", "Below 60th", "Above 60th", "Below 60th")
total_sums_and_labels <- data.frame(Sum = total_sums, Label = total_labels)
View(total_sums_and_labels)
injury_vs_killed <- c("Killed", "Killed", "Injury", "Injury")
total_sums_and_labels$result_of_accident <- injury_vs_killed
total_sums_and_labels <- rename(total_sums_and_labels, total_num_of_persons = Sum)
total_sums_and_labels <- rename(total_sums_and_labels, above_or_below_60th_st = Label)
View(total_persons_injured_above_60th)
total_persons_injured_above_60th$quarter <- quarter(total_persons_injured_above_60th$crash_date)
total_persons_injured_below_60th$quarter <- quarter(total_persons_injured_below_60th$crash_date)
total_persons_killed_above_60th$quarter <- quarter(total_persons_killed_above_60th$crash_date)
total_persons_killed_below_60th$quarter <- quarter(total_persons_injured_below_60th$crash_date)
total_persons_killed_below_60th$quarter <- quarter(total_persons_killed_below_60th$crash_date)
View(total_persons_injured_below_60th)
View(total_persons_killed_above_60th)
View(total_persons_killed_below_60th)
injured_above_60th_quarterly <- total_persons_injured_above_60th %>%
group_by(quarter) %>%
summarise(sum_injured = sum(num_of_persons_injured, na.rm = TRUE))
View(injured_above_60th_quarterly)
injured_below_60th_quarterly <- total_persons_injured_below_60th %>%
group_by(quarter) %>%
summarise(sum_injured = sum(num_of_persons_injured, na.rm = TRUE))
View(injured_below_60th_quarterly)
killed_above_60th_quarterly <- total_persons_killed_above_60th %>%
group_by(quarter) %>%
summarise(sum_injured = sum(num_of_persons_killed, na.rm = TRUE))
killed_above_60th_quarterly <- total_persons_killed_above_60th %>%
group_by(quarter) %>%
summarise(sum_injured = sum(num_of_persons_killed, na.rm = TRUE))
killed_below_60th_quarterly <- total_persons_below_below_60th %>%
group_by(quarter) %>%
summarise(sum_injured = sum(num_of_persons_killed, na.rm = TRUE))
killed_below_60th_quarterly <- total_persons_killed_below_60th %>%
group_by(quarter) %>%
summarise(sum_injured = sum(num_of_persons_killed, na.rm = TRUE))
View(killed_above_60th_quarterly)
View(killed_below_60th_quarterly)
injured_above_60th_quarterly %>%
mutate(above_or_below = above)
injured_above_60th_quarterly %>%
mutate(above_or_below = "above")
injured_above_60th_quarterly %>%
mutate(above_or_below = "above")
injured_above_60th_quarterly <- injured_above_60th_quarterly %>%
mutate(above_or_below = "above")
injured_below_60th_quarterly <- injured_below_60th_quarterly %>%
mutate(above_or_below = "below")
.
injured_quarterly_sum <- rbind(injured_above_60th_quarterly['quarter'], injured_below_60th_quarterly['quarter'])
View(injured_quarterly_sum)
injured_quarterly_sum <- rbind(injured_below_60th_quarterly, injured_above_60th_quarterly)
View(injured_quarterly_sum)
killed_above_60th_quarterly <- killed_above_60th_quarterly %>%
mutate(above_or_below = "above")
killed_below_60th_quarterly <- killed_below_60th_quarterly %>%
mutate(above_or_below = "below")
killed_quarterly_sum <- rbind(killed_below_60th_quarterly, killed_above_60th_quarterly)
View(killed_quarterly_sum)
View(injured_above_60th_quarterly)
View(injured_below_60th_quarterly)
neighborhood_breakdown_stats <- read_csv("neighborhood_injury_death_statistics.csv")
View(neighborhood_breakdown_stats)
neighborhood_stats_cleaned <- neighborhood_breakdown_stats %>%
select(-CountyFIPS, -BoroCode, -NTA2020, -NTAAbbrev, -BoroName, -NTAType, -CDTA2020, -CDTAName, -Shape_Leng, -Shape_Area)
View(neighborhood_stats_cleaned)
neighborhood_stats_cleaned_squeaky_clean <- neighborhood_stats_cleaned %>%
rename(Neighborhood Name = NTAName,
neighborhood_stats_cleaned_squeaky_clean <- neighborhood_stats_cleaned %>%
rename(neighborhood_name = NTAName,
total_injuries = num_of_persons_injured_sum,
total_deaths = num_of_persons_killed_sum)
View(neighborhood_stats_cleaned_squeaky_clean)
above_or_below <- c("Below", "Below", "Below", "Below", "Below", "Below", "Below", "Below", "Below", "Below", "Below", "Below", "Below", "Below", "Below", "Below", "Below", "Below", "Above", "Above", "Above", "Above", "Above", "Above", "Above", "Above", "Above", "Above", "Above", "Above", "Above", "Above", "Above", "Above", "Above", "Above", "Above")
neighborhood_stats_cleaned_squeaky_clean$above_or_below_60th <- above_or_below
